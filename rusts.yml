server:
  host: 0.0.0.0
  port: 8086
  max_body_size: 10485760 # 10MB — Rest request body size limit (increase as needed)
  request_timeout_secs: 120
  query_timeout_secs: 120
  max_concurrent_queries: 100
storage:
  data_dir: ./data
  wal_dir: null
  wal_durability: periodic
  wal_sync_interval_ms: 100
  wal_retention_secs: 604800
  memtable:
    max_size_mb: 64
    max_points: 1000000
    max_age_secs: 60
    # Out-of-order commit lag in milliseconds. Waits this long after the last
    # write before flushing, allowing late-arriving data to be sorted correctly.
    out_of_order_lag_ms: 1000
  partition_duration_hours: 24
  compression: default
  # fsync segment files and partition metadata after writes (default: true).
  # Disabling trades durability for write throughput.
  fsync_on_write: true
  # Use Direct I/O (bypass OS page cache) for WAL files (default: false).
  # Reduces cache pollution on write-heavy workloads. Uses F_NOCACHE on macOS,
  # posix_fadvise(DONTNEED) on Linux.
  direct_io_wal: false
  # Use Direct I/O (bypass OS page cache) for segment files (default: false).
  direct_io_segments: false
  # Retention policies — a background task checks every 60s and deletes
  # partitions whose data is entirely older than the configured duration.
  # Duration suffixes: s (seconds), m (minutes), h (hours), d (days), w (weeks).
  # Pattern supports * glob wildcard.
  # Example:
  #   retention_policies:
  #     - name: default
  #       pattern: "*"
  #       duration: "90d"
  #       is_default: true
  #     - name: short_lived_metrics
  #       pattern: "tmp_*"
  #       duration: "7d"
  retention_policies: []
# Authentication — when enabled, /write, /query, /sql, /stats require a valid
# JWT Bearer token. /health and /ready remain public.
auth:
  enabled: false
  jwt_secret: change-me-in-production   # MUST change for production
  token_expiration_secs: 3600            # Token lifetime in seconds
logging:
  level: info
  show_target: true
  show_thread_ids: false
  show_location: false
postgres:
  enabled: true
  host: 0.0.0.0
  port: 5432
  max_connections: 100  # Max concurrent pgwire connections (0 = unlimited)
telemetry:
  # Enable OpenTelemetry metrics and trace export (default: false).
  # When disabled, zero overhead — no providers are installed.
  enabled: true
  # OTLP gRPC endpoint for the OpenTelemetry Collector.
  otlp_endpoint: "http://localhost:4317"
  # How often the background thread samples process CPU / memory (seconds).
  sample_interval_secs: 5
  # OTLP metric export interval (seconds).
  export_interval_secs: 10
  # Service name reported to the collector.
  service_name: rusts
